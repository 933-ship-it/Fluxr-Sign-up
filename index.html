<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Fluxr – Instant Money Transfers</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Fluxr – Instant, secure money transfers — no custody, just flow. Sign in with Google to get started." />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>

  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: #f0f2f5; /* Light grey background */
    }
    .card {
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); /* Softer shadow */
    }
    .btn-google {
      background-color: #4285F4; /* Google Blue */
      color: white;
      transition: background-color 0.3s ease;
    }
    .btn-google:hover {
      background-color: #357ae8; /* Darker Google Blue on hover */
    }
    /* Simple fade-in animation for overall content */
    .fade-in-content {
      animation: fadeIn 1s ease-out forwards;
      opacity: 0;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body class="flex items-center justify-center min-h-screen text-gray-800 p-4">

  <div class="card w-full max-w-md p-8 text-center fade-in-content">
    <h1 class="text-4xl font-bold text-gray-900 mb-4">Fluxr</h1>
    <p class="text-lg text-gray-600 mb-8">Instant, secure money transfers — no custody, just flow.</p>

    <button
      id="signInBtn"
      class="btn-google flex items-center justify-center w-full px-6 py-3 rounded-lg text-lg font-semibold focus:outline-none focus:ring-4 focus:ring-blue-300"
    >
      <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google icon" class="w-6 h-6 mr-3">
      Sign in with Google
    </button>
    <div id="authStatus" class="text-gray-500 mt-6 text-base min-h-[20px]"></div>
  </div>

  <footer class="absolute bottom-4 left-0 right-0 text-center text-gray-500 text-sm">
    &copy; <span id="year"></span> Fluxr. All rights reserved.
  </footer>

  <script>
    // --- Firebase Config (use your Fluxr config here) ---
    const firebaseConfig = {
      apiKey: "AIzaSyB4WYZojOArqdAceRQZD6a6re7MP0Ikl0c", // Your Fluxr API Key
      authDomain: "fluxr-913c8.firebaseapp.com",        // Your Fluxr Auth Domain
      projectId: "fluxr-913c8",                         // Your Fluxr Project ID
      storageBucket: "fluxr-913c8.firebasestorage.app", // Your Fluxr Storage Bucket
      messagingSenderId: "779319537916",                // Your Fluxr Messaging Sender ID
      appId: "1:779319537916:web:5afa18aade22959ca3a779", // Your Fluxr App ID
      measurementId: "G-QX76Q1Z1QB"                     // Your Fluxr Measurement ID
    };

    // Initialize Firebase (Compat Version)
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth(); // Get auth instance

    // Elements
    const signInBtn = document.getElementById("signInBtn");
    const authStatus = document.getElementById("authStatus");
    const HOME_URL = "https://933-ship-it.github.io/Fluxr.com/"; // Your Fluxr main app URL

    function redirectToHome() {
      window.location.href = HOME_URL;
    }

    async function signInWithGoogle() {
      const provider = new firebase.auth.GoogleAuthProvider(); // Google Auth Provider
      try {
        await auth.signInWithPopup(provider);
        authStatus.textContent = "Sign-in successful! Redirecting…";
        setTimeout(redirectToHome, 900);
      } catch (error) {
        authStatus.textContent = "Authentication failed. Please try again: " + error.message;
        console.error("Sign-in error:", error);
      }
    }

    // Attach event listener to button
    signInBtn.onclick = signInWithGoogle;

    // Optional: Sign out on landing page load (as seen in TradeDeck landing)
    // This can be useful if you always want users to explicitly sign in when they hit the landing.
    auth.signOut();

    // Auth state listener (as seen in TradeDeck landing)
    auth.onAuthStateChanged(user => {
      if (user) {
        authStatus.textContent = `Welcome, ${user.displayName}! Redirecting…`;
        setTimeout(redirectToHome, 1200);
      } else {
        authStatus.textContent = ""; // Clear status if no user
      }
    });

    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
